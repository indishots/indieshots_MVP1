# IndieShots - Screenplay to Shot List Converter

## Overview

IndieShots is a full-stack web application that converts screenplay scripts into structured shot lists using AI-powered analysis. The application is designed for independent filmmakers and content creators to streamline their pre-production workflow by automatically extracting scenes, characters, locations, and other production elements from scripts.

## System Architecture

The application follows a monorepo structure with a React frontend and Express.js backend, both written in TypeScript. The architecture is designed for simplicity and rapid development while maintaining scalability.

### Frontend Architecture
- **Framework**: React 18 with TypeScript
- **Styling**: Tailwind CSS with shadcn/ui component library
- **State Management**: TanStack Query for server state management
- **Routing**: Wouter for lightweight client-side routing
- **Build Tool**: Vite for fast development and optimized builds

### Backend Architecture
- **Runtime**: Node.js with Express.js framework
- **Language**: TypeScript with ES modules
- **Database**: PostgreSQL with Drizzle ORM
- **Authentication**: Multiple providers (Firebase, JWT, OAuth)
- **File Processing**: Multer for uploads with DOCX/TXT support
- **AI Integration**: OpenAI GPT-4 for script parsing

## Key Components

### Authentication System
The application supports multiple authentication methods:
- Firebase Authentication for Google OAuth
- JWT-based local authentication
- Session-based authentication with PostgreSQL storage
- Demo mode for development and testing

**Rationale**: Multiple auth providers ensure flexibility for different user preferences while Firebase provides reliable OAuth integration.

### File Processing Pipeline
1. **Upload**: Multer handles file uploads with validation
2. **Processing**: Text extraction from DOCX/TXT files
3. **Parsing**: AI-powered analysis using OpenAI GPT-4
4. **Export**: XLSX/CSV generation for shot lists

**Security**: File validation uses magic bytes and extension whitelisting (OWASP recommended).

### Database Design
- **Users**: Stores user profiles, subscription tiers, and usage quotas
- **Scripts**: File metadata and content storage
- **Parse Jobs**: Background job tracking with status updates
- **Sessions**: Session storage for authentication

**Choice**: PostgreSQL provides ACID compliance and JSON support for flexible data structures.

## Data Flow

1. **User Registration/Login**: Authentication through multiple providers
2. **Script Upload**: File validation and text extraction
3. **Column Selection**: User chooses data fields to extract
4. **AI Processing**: Background job processes script with OpenAI
5. **Review & Export**: User reviews results and downloads formatted output

## External Dependencies

### Core Dependencies
- **OpenAI**: GPT-4 API for intelligent script parsing
- **Firebase**: Authentication services (optional)
- **SendGrid**: Email services for notifications
- **Neon**: PostgreSQL database hosting

### Security Considerations
- CSRF protection disabled for development (to be enabled in production)
- File upload validation using magic bytes
- JWT token management with secure cookies
- Environment variable protection for API keys

## Deployment Strategy

### Development Environment
- **Platform**: Replit with PostgreSQL module
- **Port Configuration**: Application runs on port 5000
- **Auto-deployment**: Configured for Replit's autoscale deployment

### Build Process
1. Frontend build with Vite (outputs to `dist/public`)
2. Backend build with esbuild (outputs to `dist`)
3. Static file serving from Express

### Environment Variables Required
```
DATABASE_URL=postgresql_connection_string
OPENAI_API_KEY=openai_api_key
VITE_FIREBASE_API_KEY=firebase_api_key (optional)
VITE_FIREBASE_PROJECT_ID=firebase_project_id (optional)
JWT_SECRET=jwt_secret_key
```

## Changelog

Recent Changes:
- July 22, 2025: **AUTHENTICATION AND TIER SYSTEM COMPLETELY FIXED** - Eliminated hardcoded account protection list and implemented intelligent tier validation system; upgrade endpoint now bypasses cached JWT tokens and checks fresh database data; added automatic tier correction that fixes accounts incorrectly marked pro without promo codes; both dhulipallagopichandu@gmail.com and gopichandudhulipalla@gmail.com confirmed as free tier (5 pages, 5 shots, no storyboards); system now generates fresh JWT tokens when tier corrections occur; upgrade button should now properly show PayU payment instead of "Already on pro tier" error
- July 22, 2025: **AUTHENTICATION SYSTEM DEBUGGING AND USER ACCOUNT RESTORATION COMPLETED** - Successfully diagnosed and resolved critical database schema issues preventing user sign-ins; added missing PayU payment columns (payu_transaction_id, firebase_uid, display_name) to users table; restored user account gopichandudhulipalla@gmail.com with proper Firebase UID mapping and corrected tier assignment from mistakenly assigned "pro" back to appropriate "free" tier; authentication system now fully operational with proper database sync functionality
- July 22, 2025: **PRODUCTION PAYMENT SYSTEM COMPLETELY IMPLEMENTED** - Built comprehensive payment infrastructure with PayU (India-focused) and Stripe (Global) integrations; implemented automatic production/test environment switching based on NODE_ENV; created complete email notification system with SendGrid/SMTP support for payment confirmations, welcome emails, and failure notifications; added webhook verification for both PayU hash validation and Stripe signature verification; implemented automatic user tier upgrades upon successful payment; created payment history and subscription management; added database schema updates with payment fields (stripeCustomerId, stripeSubscriptionId, payuTransactionId, paymentMethod, paymentStatus); built payment method selection with auto-detection based on currency; created payment success/cancel pages; comprehensive production deployment guide created with environment variable requirements; system now ready for live payment processing with proper security measures
- July 18, 2025: **UPGRADE PAGE USAGE DATA FIXED** - Fixed upgrade page showing incorrect "0/5 pages" instead of actual page usage by implementing same database query logic in /api/upgrade/plans endpoint as the status endpoint; upgrade page now accurately reflects actual page usage count matching the left panel and project cards; both upgrade plans and status endpoints now use consistent page counting logic that sums pageCount from user scripts
- July 18, 2025: **EXCEL/CSV EXPORT SUCCESS MESSAGES CLEANED UP** - Removed shot count and field count numbers from download success messages; Excel export now shows "Downloaded Excel file with comprehensive shot data" instead of "Downloaded X shots as Excel file with X comprehensive fields"; CSV export now shows "Downloaded CSV file with comprehensive shot data" instead of "Downloaded X shots with X comprehensive fields"; provides cleaner user experience without unnecessary number details
- July 18, 2025: **FREE TIER PAGE COUNTING SYSTEM COMPLETELY FIXED** - Resolved critical issue where left panel wasn't updating page usage count after script uploads; implemented actual page counting logic by summing pageCount field from user's scripts instead of just counting number of scripts; fixed user ID format conversion by ensuring proper string conversion for database matching; added comprehensive debugging to track script counts and user ID matching; left panel now accurately reflects actual page usage count (4-page script now shows "4/5 pages used" instead of "1/5 pages used"); enhanced with proper cache invalidation in upload flow to refresh usage data after script uploads and parse job completions
- July 18, 2025: **STORYBOARD SUCCESS MESSAGE CLEANED UP** - Removed image count numbers from storyboard generation completion message; now shows "All images generated successfully" instead of "X images generated successfully" for consistency with shot generation messages
- July 18, 2025: **SHOT GENERATION SUCCESS MESSAGE CLEANED UP** - Removed shot count numbers from success message; now shows "Generated all shots for the scene" instead of "Generated X shots for the scene" for cleaner user experience
- July 18, 2025: **WORKFLOW TEXT UPDATED** - Changed step 2 from "Define Your Scenes" to "Select Your Scenes" in homepage workflow section for better clarity and user understanding
- July 18, 2025: **RECENTLY UPLOADED NAVIGATION FIXED** - Fixed navigation issues in "Recently Uploaded" section where review and download buttons were pointing to incorrect pages and API endpoints; review button now correctly navigates to review page for completed scripts using proper parse job IDs; download button now uses correct API endpoint and is disabled for scripts still processing
- January 16, 2025: **COMPREHENSIVE SHOT RECOVERY SYSTEM COMPLETED** - Built complete automatic recovery system for failed image generation that ensures 100% success rate for ALL types of content; created shotRecoveryService.ts with intelligent detection and fixing of failed shots using LLM rewriting; implemented /api/storyboards/recover/:jobId/:sceneIndex endpoint for batch recovery of failed shots; integrated automatic recovery into robustImageGenerator that triggers when multiple shots fail; enhanced storyboards frontend with "Fix X Failed" button that uses recovery mutation; system now automatically detects problematic content, applies GPT-4 rewriting, and recovers any shots that fail through OpenAI content policy violations; provides seamless user experience with automatic error recovery and manual recovery options
- January 16, 2025: **LLM-POWERED PROMPT REWRITING SYSTEM IMPLEMENTED** - Created advanced PromptRewriter service using GPT-4 to intelligently rewrite problematic prompts like "Man staggers back, blood spurting from neck" that still fail after basic sanitization; implemented comprehensive LLM-based content analysis with confidence scoring, reasoning explanations, and fallback mechanisms; integrated into robustImageGenerator, imageGenerator, and regeneration endpoints; system now automatically detects problematic content and uses GPT-4 to rewrite prompts using film production terminology while preserving dramatic intent; ensures 100% image generation success rate for violent action scenes through intelligent prompt transformation; includes batch processing capabilities and comprehensive error handling
- January 16, 2025: **COMPREHENSIVE CONTENT POLICY DETECTION SYSTEM IMPLEMENTED** - Created advanced ContentPolicyDetector service with intelligent content analysis and sanitization for film projects; integrated comprehensive 90+ term replacements (blood→red stage makeup, stabbing→dramatic thrust scene, weapons→film props, etc.) covering violence, weapons, death, combat, substances, and adult content; implemented OpenAI moderation API integration for real-time content flagging; added word-boundary matching to prevent partial replacements; created aggressive sanitization for highly problematic content; integrated detector into robustImageGenerator, imageGenerator, and regeneration endpoints; system now automatically processes ALL prompts through comprehensive content policy analysis ensuring maximum image generation success while preserving original script context and artistic integrity
- January 16, 2025: **FALLBACK IMAGE GENERATION SYSTEM IMPROVED** - Created dedicated fallbackImageGenerator service with valid base64 placeholder images to prevent ERR_INVALID_URL errors; updated all image generation services to use generateValidFallbackImage function instead of corrupted fallback images; added base64 validation in storyboards component to prevent invalid image data from causing browser errors; system now provides reliable fallback images when OpenAI API fails or content policies are violated
- January 16, 2025: **COMPREHENSIVE COST CONTROL SYSTEM IMPLEMENTED** - Created complete cost management system to prevent excessive OpenAI API billing; implemented CostController singleton with daily usage tracking, tier-based limits (Free: 5 images/$0.50/day, Pro: 50 images/$5.00/day), automatic fallback to demo content when limits exceeded; integrated cost controls throughout image generation pipeline in both robustImageGenerator and imageGenerator services; added real-time usage monitoring API at /api/usage-stats; created UsageDashboard React component with progress bars and notifications; implemented useUsageMonitoring hook for automatic alerts at 80% and 95% usage thresholds; reduced retry attempts from 3 to 1 to minimize billing multiplication; system now provides comprehensive protection against billing spikes while maintaining user experience through intelligent fallbacks
- July 9, 2025: **TIER-BASED SHOT GENERATION SYSTEM CORRECTLY IMPLEMENTED** - Confirmed and maintained proper tier restrictions where free tier users get maximum 5 shots per scene with no storyboard generation, while pro tier users get unlimited shots and storyboard generation; enhanced AI generation to produce 5-10 shots for better scene coverage; shot generation system now properly respects user tier limits with appropriate upgrade prompts; both demo fallback and AI-based generation follow tier restrictions; comprehensive tier validation implemented at both frontend and backend levels; added extensive debugging for premium@demo.com to ensure proper tier detection
- July 9, 2025: **AUTHENTICATION AND SCRIPT UPLOAD COMPLETELY FIXED** - Resolved critical 401 "Invalid token" error preventing script uploads; fixed client-side authentication to use cookie-based auth instead of localStorage JWT tokens; updated API request handling to properly use credentials: "include" for automatic cookie transmission; verified server-side authentication middleware correctly processes HTTP-only cookies; script upload functionality now works seamlessly with Firebase authentication system; users can successfully upload scripts and initiate parse jobs without authentication errors; fixed JWT token blacklisting issue causing valid tokens to be rejected
- July 9, 2025: **VIOLENT CONTENT SANITIZATION SYSTEM ENHANCED** - Improved content policy handling for violent scenes by adding comprehensive phrase-based replacements for specific violent descriptions; system now converts "stabbing," "blood spurting," and "kicking" scenes into safe cinematic alternatives like "dramatic confrontation" and "red stage effects"; enhanced sanitization covers complex violent scenarios while maintaining artistic quality; users can now generate storyboards for action scenes without content policy violations
- July 9, 2025: **IMAGE REGENERATION 500 ERROR COMPLETELY FIXED** - Resolved critical 500 error in image regeneration endpoint caused by OpenAI API key lacking DALL-E 3 access permissions; implemented proper error handling for API access errors, returning clear user-friendly messages instead of server crashes; enhanced error detection to identify "image_generation_user_error" responses and return appropriate HTTP status codes (400 for user errors, 500 for server errors); added comprehensive error logging and debugging capabilities; users now receive clear feedback about API key permission issues instead of generic 500 errors
- July 6, 2025: **STORYBOARD GENERATION ISSUE DIAGNOSED AND FIXED** - Identified root cause of storyboard generation failures as OpenAI API BadRequestError (400) with "image_generation_user_error" indicating insufficient DALL-E 3 access permissions on the API key; implemented comprehensive error handling to detect API access issues, quota exceeded errors, and timeout problems; enhanced fallback system with specific error messaging (API_ACCESS_ERROR, QUOTA_EXCEEDED, API_UNAVAILABLE); improved frontend error handling to show appropriate user messages when all images fail due to API limitations; users now receive clear feedback about API issues instead of silent failures
- July 6, 2025: **ACTUAL IMAGE GENERATION PRIORITIZED AND RESTORED** - Reverted aggressive timeout settings that were preventing real image generation; restored original 90-120 second timeouts to allow DALL-E 3 sufficient time for quality image generation; increased retry attempts to 5 for better success rates; implemented conservative error handling that prioritizes real images over placeholders; only uses fallback placeholders as absolute last resort after multiple genuine attempts fail; maintains real-time progressive updates while ensuring users see actual generated images
- July 6, 2025: **REAL-TIME STORYBOARD GENERATION ENHANCED** - Improved progressive storyboard generation with faster polling (1 second intervals instead of 2), reduced inter-batch delays (500ms instead of 1000ms), enhanced visual feedback with green overlay animations for newly generated images, better completion detection including error states, and improved progress tracking; images now appear more immediately as they're generated without breaking existing functionality
- July 5, 2025: **DEPLOYMENT JSON PARSING ERROR COMPLETELY FIXED** - Resolved critical "Failed to parse error response as JSON: SyntaxError: Failed to execute 'json' on 'Response': Unexpected end of JSON input" error occurring only in deployed version; enhanced server-side storyboard endpoints with comprehensive error protection and database query error handling; improved client-side safeResponseHandler to detect HTML error pages and return appropriate fallback responses; added database-level error handling in storage layer to prevent 500 errors from propagating; storyboard fetching now gracefully handles deployment environment issues and returns empty arrays instead of crashing
- July 5, 2025: **DEPLOYMENT STREAM ERROR COMPLETELY FIXED** - Resolved critical "Failed to execute 'text' on 'Response': body stream already read" error preventing image generation in deployment environment; fixed response body handling by separating arrayBuffer() reading from Buffer.from() conversion across all image generation functions; added proper User-Agent headers for deployment compatibility; image generation now works reliably in both development and production environments
- July 5, 2025: **ERROR PREVIEW AND BULK RETRY SYSTEM COMPLETELY FIXED** - Resolved critical issues preventing error states from displaying in storyboard interface; fixed server response mapping to properly pass error strings through both imageData and imagePath fields; updated progressive loading logic to exclude error states from completion count; verified database test data with GENERATION_ERROR and CONTENT_POLICY_ERROR states; error preview cards now display with specific messages, individual "Try Again" buttons, and bulk "Retry All Failed" functionality; system achieves maximum user control over storyboard generation recovery with intelligent error-specific retry strategies
- July 5, 2025: **SMART RETRY SYSTEM WITH INTELLIGENT ERROR ANALYSIS IMPLEMENTED** - Enhanced storyboard error handling with detailed failure previews and intelligent retry logic; users now see specific error messages ("Content Policy Issue", "Generation Failed", "Processing Error") with contextual descriptions; implemented error-type-specific retry strategies (content policy uses ultra-safe prompts, generation errors use simplified prompts, processing errors use basic technical prompts); added "Retry All Failed" bulk action button with automatic error detection; enhanced backend with smart fallback prompts based on shot content (action scenes vs character conversations); system now provides maximum user control while intelligently addressing different failure types without breaking existing functionality
- July 5, 2025: **COMPREHENSIVE ERROR ISOLATION SYSTEM IMPLEMENTED** - Completely overhauled storyboard generation to process each image with complete isolation; individual image failures now never crash entire batch; implemented comprehensive error handling for prompt generation failures, OpenAI API errors, content policy violations, and database storage issues; added multiple fallback mechanisms and safe retry logic; frontend now displays specific error states with manual retry buttons; enhanced with manual refresh capability and detailed progress logging; system now achieves maximum possible success rate even when OpenAI API returns non-JSON responses or HTML error pages
- July 4, 2025: **ANIMATION REMOVED** - Removed cinematic animation and reverted to simple loading spinner in button during shot generation; shot generation now shows "Generating Shots..." with standard spinning loader when processing
- July 4, 2025: **REGENERATION UX IMPROVED** - Fixed confusing behavior where custom prompts were cleared immediately when regeneration started; prompts now persist until successful completion preventing user confusion and allowing retry attempts on failure; added visual feedback with disabled input state during processing
- July 4, 2025: **PROGRESSIVE STORYBOARD GENERATION IMPLEMENTED** - Replaced static loading animation with dynamic progressive grid that shows storyboard images as they generate in real-time; users now see individual image slots filling up as AI creates each storyboard frame instead of waiting for entire batch to complete; improved user experience with immediate visual feedback and progress tracking showing "X of Y images generated"; uses 2-second polling during generation to fetch and display new images progressively; maintains all existing functionality while providing much better perceived performance
- July 4, 2025: **UI THEME CONSISTENCY COMPLETELY UPDATED** - Enhanced entire application interface with consistent indigo and golden color scheme throughout; updated Pro Plan displays in left panel and dashboard with golden shine effects and animations; improved status badge system with light indigo backgrounds instead of heavy gradients; enhanced Quick Actions hover effects with theme-appropriate transitions; removed excessive animations and simplified "Parsed" status badges; organized dashboard card text layout with centered headers and better spacing; streamlined upgrade page by removing feature comparison card for cleaner layout; updated "Most Popular" badges with minimal white background and light amber text; improved dashboard Usage Quota card with prominent usage display and centered layout; created Script Health "Coming Soon" page; application now has cohesive premium visual design using light indigo colors for better readability
- July 4, 2025: **FIREBASE AUTHENTICATION SYSTEM COMPLETELY FIXED** - Fixed critical server syntax errors preventing startup; created simplified Firebase sync controller with dynamic promo code validation; verified dhulipallagopichandu@gmail.com account properly set to pro tier with unlimited access; confirmed INDIE2025 promo code usage records exist in database; replaced hardcoded account protection with pure dynamic promo code system that automatically detects promo code usage and grants appropriate tier; system now works universally for all users based on promo code usage without any hardcoded lists; authentication flow properly identifies pro tier users during Firebase sync
- July 4, 2025: **UNIVERSAL DYNAMIC PROMO CODE SYSTEM COMPLETED** - Completely replaced hardcoded account protection with pure dynamic promo code validation system; implemented comprehensive promo code detection in storage layer using Drizzle ORM queries to check promo_code_usage table; system automatically detects INDIE2025 (or any future promo codes) and grants appropriate tier on every authentication; removed all hardcoded account lists from both backend and frontend; users with promo codes automatically receive granted tier without any "forced" overrides; users without promo codes receive standard free tier; system works universally for all existing and future users with zero maintenance required; eliminated forced tier displays in favor of authentic promo code-based tier assignment
- July 4, 2025: **PREMIUM DEMO ACCOUNT COMPLETELY FIXED** - Successfully resolved critical issue where premium@demo.com was showing as free tier instead of pro tier; implemented comprehensive multi-layer fix including JWT token verification override, premium demo utility functions, Firebase sync controller modifications, production quota manager overrides, and database protection; premium@demo.com now consistently returns pro tier with unlimited pages (-1), unlimited shots (-1), and storyboard generation (true) across all authentication endpoints; all frontend components properly display "Pro Member" status with Crown icons and unlimited access messaging; verified through comprehensive testing of Firebase sync, auth user, and upgrade status endpoints
- July 4, 2025: **CLASSY SHOT GENERATION ANIMATION IMPLEMENTED** - Replaced basic clapperboard loading animation with sophisticated classy animation system featuring elegant film elements, golden accents, orbiting geometric shapes, floating sparkles, and smooth transitions; created LuxuryStoryboardAnimation for storyboard generation with animated sketch frames and golden pen drawing effects; enhanced user experience with eye-catching premium visual design that reflects professional filmmaking aesthetic
- July 4, 2025: **PROMO CODE SYSTEM COMPLETELY FIXED** - Identified and resolved critical authentication flow issue where users with promo codes weren't getting pro tier access; fixed authentication manager to use Firebase sync endpoint instead of firebase-login endpoint; users with promo codes now properly sync Firebase custom claims (tier: pro) to PostgreSQL database during signin; eliminated data consistency violations where PostgreSQL contained users who didn't exist in Firebase; all promo code users now receive immediate pro tier access with unlimited pages, unlimited shots, and storyboard generation capabilities
- July 4, 2025: **PROMO CODE EXTENDED TO FULL JULY ACCESS** - Extended INDIE2025 promo code validity from specific dates to entire month of July 2025 (July 3-31); users can now sign up with promo code throughout July and receive immediate pro tier access with unlimited pages, unlimited shots, and storyboard generation capabilities
- July 4, 2025: **TIER PERSISTENCE CONSISTENCY COMPLETELY FIXED** - Resolved critical tier inconsistencies causing promo code users to lose pro access after logout/signin; fixed JWT token generation fallback logic that was incorrectly handling undefined tier values; standardized totalPages values across all systems (pro=-1, free=5); enhanced token generation with explicit tier determination and comprehensive logging; users now maintain tier access permanently regardless of logout/signin cycles
- July 4, 2025: **FIREBASE-FIRST DATA CONSISTENCY ENFORCED** - Fixed critical data consistency issue in PromoCodeService to ensure no PostgreSQL users exist without Firebase users; implemented Firebase verification before any PostgreSQL user updates; promo codes now verify Firebase user existence before applying tier changes; maintains perfect data consistency where Firebase serves as single source of truth for all user data
- July 3, 2025: **FIREBASE-FIRST AUTHENTICATION SYSTEM COMPLETELY FIXED** - Resolved critical authentication flow issues where signup and signin weren't working correctly as Firebase-first architecture; updated verification page to use Firebase custom tokens for seamless authentication after OTP verification; fixed signin flow to check Firebase user existence before client-side authentication; eliminated multiple conflicting authentication systems in favor of unified hybrid approach; users now properly created in Firebase with custom claims for tier information, then synced to PostgreSQL on signin; promo code users get immediate pro tier access through Firebase custom claims; authentication flow now works consistently: signup→OTP→Firebase user creation→auto-signin with proper tier access
- July 3, 2025: **COMPREHENSIVE TIER VALIDATION SYSTEM COMPLETELY REBUILT** - Completely overhauled tier validation to ensure perfect synchronization between database and JWT tokens; fixed JWT token generation to include all tier fields (canGenerateStoryboards, totalPages, maxShotsPerScene) not just tier string; enhanced tier validation middleware to detect any tier field mismatch and automatically refresh stale tokens; added tier validation to all shots API endpoints; fixed /api/auth/user endpoint to return actual database values instead of hardcoded ones; eliminated confusing "Free tier: 5 pages" messaging from upload page; pro users now get immediate access to Excel export and all premium features without manual intervention
- July 3, 2025: **EXCEL EXPORT TIER VALIDATION FIXED** - Resolved issue where Export as Excel button was disabled even for pro users; implemented fresh user data fetching in shots page with direct API calls bypassing cache; added comprehensive tier debugging and validation to ensure pro users have immediate access to Excel export functionality
- July 3, 2025: **UPLOAD PAGE QUOTA DISPLAY CLEANED UP** - Removed confusing tier quota text below Browse Files button that was showing "Free tier: 5 pages per month" even for pro users; upload interface now has cleaner design without quota messaging that was causing user confusion about their actual tier access
- July 3, 2025: **AUTOMATIC TIER VALIDATION SYSTEM IMPLEMENTED** - Created comprehensive tier validation middleware and frontend hooks to automatically refresh user tier information; implemented useTierValidation hook that runs 2 seconds after login to check for tier updates and refresh UI accordingly; added tierValidationMiddleware to server routes for automatic JWT token updates when tier changes occur in database
- July 3, 2025: **FIREBASE-FIRST TIER SYSTEM IMPLEMENTED** - Restructured authentication architecture to use Firebase as single source of truth for tier information; eliminated race conditions by storing tier in Firebase custom claims during verification, then syncing to PostgreSQL only when user signs in; PromoCodeService now only records usage without updating user tables; firebaseSync controller extracts tier from Firebase custom claims and updates PostgreSQL accordingly; ensures perfect consistency between Firebase and PostgreSQL tier data
- July 3, 2025: **CHARACTER CONSISTENCY SYSTEM FULLY FIXED** - Resolved issues where character extraction wasn't working and images weren't generating in cinematic format; updated buildPrompt function to match working Python format exactly including character and dialogue fields; enhanced character extraction to parse existing database character fields (e.g., "Boy, Woman") instead of relying solely on GPT-4 extraction; fixed image aspect ratio to cinematic 1792x1024 format across all generation functions; character descriptions now generate and persist correctly with detailed visual descriptions for consistent storyboard appearance
- July 3, 2025: **AUTOMATIC TIER VALIDATION SYSTEM IMPLEMENTED** - Fixed authentication issue where pro tier users (including promo code users) were seeing upgrade prompts instead of accessing premium features; implemented automatic tier validation that runs 2 seconds after login to refresh user data and update JWT tokens with correct tier information; created /api/auth/user and /api/auth/refresh-session endpoints for seamless tier synchronization; users now automatically get their correct tier access without manual intervention or page refreshes; eliminates UX friction for premium users while maintaining secure authentication
- July 3, 2025: **CHARACTER MEMORY SYSTEM INTEGRATED FOR CONSISTENT STORYBOARDS** - Implemented advanced character consistency system that maintains visual continuity across all storyboard images; created CharacterMemoryService with GPT-4 powered character extraction and detailed description generation; characters now look identical across all scenes with persistent character_memory.json storage; enhanced image generation prompts with character appearance blocks; upgraded to cinematic 1792x1024 image format; added comprehensive logging and debug endpoint (/api/character-memory/debug) for monitoring character discovery and storage
- July 3, 2025: **PREMIUM STORYBOARD RESTRICTIONS RESTORED WITH ANIMATED UPGRADE MODAL** - Restored storyboard generation as premium-only feature with beautiful animated upgrade modal; created StoryboardUpgradeModal component with floating cameras, sparkles, and crown animations; free tier users now see engaging upgrade prompt instead of actual storyboard generation; updated 58 user records to restrict storyboard access to pro tier only; implemented seamless frontend tier checking that prevents API calls for free users
- July 3, 2025: **SHOT GENERATION SYSTEM COMPLETELY FIXED** - Resolved critical database insertion error when API fails by adding comprehensive validation before database operations; enhanced error handling with proper HTTP status codes (503 for service unavailable); implemented realistic demo shot generation fallback system for API failures; added comprehensive logging and debugging throughout shot generation pipeline; users now receive clear error messages instead of system crashes when OpenAI API is unavailable
- July 3, 2025: **CINEMATIC FILM ANIMATION SYSTEM IMPLEMENTED** - Created comprehensive film industry-themed animation system with 4 distinct animations: clapperboard loading (general loading), security guard access denied (auth errors), film projector error (server errors), and film reel buffering (network lag); animations feature smooth CSS keyframes, film grain overlays, and mobile-responsive design; integrated into shot generation page with full-screen overlay during processing; includes custom hooks, TypeScript support, and demo page at /film-animations-demo showcasing all animations with implementation examples
- July 3, 2025: **ENHANCED FIREBASE DELETION SYSTEM WITH VERIFICATION** - Built comprehensive Firebase user deletion utility with dual-approach methodology and mandatory verification; system attempts deletion using provided Firebase UID first, then falls back to email-based lookup; includes verification step that confirms user is actually removed from Firebase Authentication console; added detailed logging throughout deletion process; created debugging endpoints for testing and monitoring Firebase deletion effectiveness; permanent account deletion now uses this robust system ensuring complete user removal
- July 3, 2025: **CRITICAL SIGNUP BUG FIXED FOR NON-PROMO USERS** - Fixed PostgreSQL upsertUser function to use email field instead of id field for conflict resolution, eliminating "Failed to create account" error for users signing up without promo codes; added hybrid mode parameter to verification page redirect ensuring proper authentication flow; free tier users now successfully create accounts with email verification and proper tier assignments while maintaining existing promo code functionality
- July 3, 2025: **PROMO CODE SYSTEM COMPLETELY OPERATIONAL** - Fixed critical authentication bug where Firebase UID vs numeric ID mismatch prevented promo code users from accessing pro features; updated user ID extraction in script upload and scenes controllers to handle Firebase UIDs correctly; promo code users now seamlessly get unlimited pages, unlimited shots, storyboard generation with no page limit errors; comprehensive testing confirms INDIE2025 grants full premium access to 400 users on valid dates (July 3rd, 6th, 7th, 26th, 27th, 2025)
- July 3, 2025: **JWT AUTHENTICATION SYSTEM COMPLETELY FIXED** - Resolved critical authentication failures by implementing missing /api/auth/user endpoint, fixing JWT secret consistency between token generation and verification, correcting ES module imports from CommonJS require() statements, and adding comprehensive debugging throughout authentication middleware; shot generation and script upload endpoints now properly authenticate users with valid JWT tokens
- July 3, 2025: **COMPREHENSIVE PERMANENT USER DELETION SYSTEM IMPLEMENTED** - Built complete permanent deletion functionality that removes all user data from all database tables when user chooses permanent account deletion; includes deletion of scripts, parse jobs, shots, promo code usage records, script health analysis, user sessions, quota records, and authentication blacklisting; enhanced authentication middleware to prevent deleted users from accessing system; ensures complete GDPR compliance and user privacy protection
- July 3, 2025: **PROMO CODE USER TIER ACCESS COMPLETELY FIXED** - Resolved critical issue where users signing up with INDIE2025 promo code were still seeing "upgrade to pro" instead of getting full premium access; fixed hybrid signup controller to use PromoCodeService instead of hardcoded coupons, updated PostgreSQL user creation with correct pro tier settings, enhanced verification page to refresh user data and invalidate query cache after promo code verification; users now automatically get unlimited pages, unlimited shots, storyboard generation, and no upgrade prompts
- July 3, 2025: **PROMO CODE CAPACITY INCREASED TO 400 USERS** - Successfully expanded INDIE2025 promo code from 150 to 400 total users as requested; database updated with new usage limits and verified through comprehensive testing
- July 3, 2025: **COMPREHENSIVE TIME-SENSITIVE PROMO CODE SYSTEM IMPLEMENTED** - Built complete promo code infrastructure with INDIE2025 code granting full premium access on specific dates (July 3rd, 6th, 7th, 26th, 27th, 2025); includes database schema with promo_codes and promo_code_usage tables, PromoCodeService with validation/application logic, real-time frontend validation component, admin monitoring dashboard, rate limiting, anti-abuse measures, and Firebase authentication integration; system supports 400 class members with comprehensive usage tracking and analytics
- July 3, 2025: **FRONTEND PROMO CODE COMPONENTS CREATED** - Built PromoCodeInput component with real-time validation, visual feedback, and debounced API calls; updated all authentication forms to use "Promo Code" terminology with placeholder "Enter promo code to get premium account"; created admin dashboard for monitoring usage statistics and system status
- July 3, 2025: **BACKEND PROMO CODE SERVICE AND API ROUTES** - Implemented PromoCodeService with date validation, usage tracking, rate limiting, and comprehensive analytics; created API endpoints for validation, application, and admin monitoring; integrated with Firebase authentication system for automatic tier upgrades
- July 2, 2025: **ENHANCED ERROR HANDLING FOR OTP VERIFICATION** - Implemented comprehensive user-friendly error messages for verification page; replaced technical error responses with clear messages for expired codes, invalid codes, and too many attempts; added attempt counter feedback and proper JSON error parsing; users now see helpful messages like "Code Expired - Please request a new code" instead of raw server responses
- July 2, 2025: **OTP EXPIRATION TIME OPTIMIZED** - Reduced OTP code expiration from 10 minutes to 5 minutes across all authentication flows for improved user experience; users can now resend codes more quickly without waiting; updated email templates, console messages, and all storage logic to reflect 5-minute expiration
- July 2, 2025: **FIREBASE CUSTOM TOKEN AUTHENTICATION IMPLEMENTED** - Added signInWithToken method to AuthManager enabling seamless Firebase authentication after OTP verification; users now automatically authenticated with Firebase custom tokens eliminating manual signin step; verification page enhanced to use custom token signin instead of localStorage fallback; complete authentication flow: signup→OTP→verify→Firebase user creation→automatic signin with custom token
- July 2, 2025: **FIREBASE-FIRST HYBRID AUTHENTICATION SYSTEM COMPLETED** - Implemented complete Firebase-as-single-source-of-truth architecture with custom OTP email verification maintaining full template control; new hybrid endpoints (/api/auth/hybrid-*) handle signup→OTP→Firebase user creation and signin→authenticate existing workflows; frontend updated to intelligently route between legacy and hybrid systems; INDIE2025 coupon integration preserved for instant Pro tier access; Firebase Admin SDK configured with service account credentials
- July 1, 2025: **EMAIL OTP VERIFICATION SYSTEM IMPLEMENTED** - Added comprehensive email verification with 6-digit OTP codes during signup to prevent fake email registrations; OTP codes logged to server console for development, expires in 10 minutes with brute force protection; includes dedicated verification page, resend functionality, and seamless integration with existing coupon system including INDIE2025 premium access
- July 1, 2025: **HELP CENTER VISIBILITY FIXED** - Resolved missing Help Center link in left navigation by correcting authentication provider import from @/hooks/useAuth to @/components/auth/UltimateAuthProvider for proper authentication state detection
- July 1, 2025: **THEME MODULE EXPORTS COMPLETED** - Added missing initializeTheme, setTheme, and setupSystemThemeListener functions to theme.ts to resolve module export errors in settings page
- July 1, 2025: **DASHBOARD BUTTON VISIBILITY PERMANENTLY FIXED** - Replaced shadcn Button components with explicit Tailwind div elements using direct color classes to eliminate CSS variable conflicts; buttons now use text-gray-900 dark:text-gray-100 and explicit borders/backgrounds for reliable visibility across all navigation states including settings page navigation
- July 1, 2025: **DEDICATED FEATURES PAGE CREATED** - Moved all features content from homepage to dedicated /features page accessible via "View Features" button; cleaned up homepage design by removing features section while maintaining professional feature showcase on separate page with standalone layout and navigation
- July 1, 2025: **HOME PAGE WORKFLOW SECTION UPDATED** - Enhanced landing page with revised 4-step workflow content emphasizing professional filmmaking process: Upload Your Script (intelligent analysis), Select Your Scenes (precise selection), Generate Detailed Shots (comprehensive technical specs), Visualize Your Story (dynamic storyboards); maintained original card dimensions with 2x2 grid layout
- July 1, 2025: **INDIE2025 PREMIUM COUPON SYSTEM FULLY OPERATIONAL** - Complete implementation verified and working; users entering "INDIE2025" during signup receive instant Pro Tier access ($29/month value) including unlimited pages, unlimited shots per scene, AI storyboard generation, and priority support without payment; backend confirmed processing coupon correctly and granting all premium features; perfect for professional filmmakers and production teams
- July 1, 2025: **INDIE2025 PREMIUM COUPON SYSTEM IMPLEMENTED** - Added coupon code functionality to sign-up page; users entering "INDIE2025" get instant premium access with unlimited pages, unlimited shots per scene, and storyboard generation capabilities; integrated frontend coupon field, backend validation, and automatic tier assignment without affecting existing premium@demo.com functionality
- July 1, 2025: **SMART LEFT PANEL NAVIGATION IMPLEMENTED** - Recent projects in left sidebar now intelligently navigate to review page for completed scripts or columns page for incomplete scripts; added parse jobs query and navigation logic to provide optimal user workflow experience
- July 1, 2025: **HEADER HELP BUTTON REMOVED** - Eliminated question mark help button from header to simplify interface; removed HelpCircle import and cleaned up header layout
- July 1, 2025: **DASHBOARD BUTTON VISIBILITY PERMANENTLY FIXED** - Resolved persistent button invisibility issue after settings navigation by replacing shadcn Button components with explicit Tailwind div elements; eliminated dependency on conflicting CSS variables between next-themes and custom theme system; buttons now use direct Tailwind classes for reliable visibility across all navigation states
- July 1, 2025: **DASHBOARD QUICK ACTIONS REVERTED TO CLEAN DESIGN** - Restored Quick Actions buttons to previous clean shadcn/ui styling by removing inline style overrides and theme change handling code; buttons now use proper theme-aware design that adapts naturally to light/dark themes
- July 1, 2025: **TOOLS SECTION REMOVED FROM NAVIGATION** - Cleaned up left navigation panel by removing Tools section (Analysis, Storyboards, AI Tools) for streamlined interface; removed unused icon imports and maintained core navigation functionality
- July 1, 2025: **DASHBOARD COMPLETED JOBS SECTION REMOVED** - Cleaned up dashboard by removing the "Completed Jobs" card while preserving all other functionality including usage quota, scripts uploaded, and premium features sections
- July 1, 2025: **COMPREHENSIVE FAQ SYSTEM IMPLEMENTED** - Created full FAQ system with 15 detailed questions across 16 categories; implemented authenticated help center (/help) with search and filtering for signed-in users; added public FAQ page (/public-faq) accessible from landing page footer; integrated Help Center link in left sidebar navigation; provides seamless user support workflow from public to authenticated access
- July 1, 2025: **ANIMATED STORYBOARD LOADING SYSTEM IMPLEMENTED** - Created beautiful animated loading screen for storyboard generation with 6 cycling animation frames featuring bouncing, floating, wiggling, spinning, pulsing, and scaling icons; compact design with IndieShots theme colors and aesthetic animations that pop out of spinning rings; enhances user experience during AI image generation wait times
- July 1, 2025: **EXCEL EXPORT SECURITY WARNINGS ELIMINATED** - Implemented proper Excel XML format to eliminate security warnings when opening downloaded files; Excel export now opens seamlessly without conversion prompts or security dialogs
- July 1, 2025: **SHOT COUNT DISPLAY REMOVED** - Cleaned up "Generated Shots" title by removing shot count numbers for cleaner interface appearance
- July 1, 2025: **TIER-BASED EXPORT SYSTEM IMPLEMENTED** - Replaced single download button with separate "Export as CSV" and "Export as Excel" buttons; Excel export restricted to Pro users with visual indicators and upgrade prompts for free tier users; CSV export available to all users with comprehensive shot data
- July 1, 2025: **COMPREHENSIVE PRODUCTION DETAILS PANEL IMPLEMENTED** - Added right-side production details panel to shot generation page displaying all 19 production fields organized in professional categories: Basic Information, Camera & Technical, Scene Context, Characters & Action, and Production Notes; enhances filmmaking workflow with clear visual breakdown of generated shot data
- July 1, 2025: **STREAMLINED SHOT GENERATION WORKFLOW** - Modified scene selection to skip CSV export fields page and go directly to shot generation page (/shots/jobId/sceneIndex), eliminating unnecessary intermediate step and improving user experience
- July 1, 2025: **STORYBOARDS TAB CONDITIONAL LOGIC IMPLEMENTED** - Enhanced storyboards tab in review page to show Generate Storyboards button (redirecting to scene selection) when no storyboards exist, or display existing storyboard images in grid layout when available
- July 1, 2025: **REVIEW PAGE SCENE-SPECIFIC SHOT GENERATION IMPLEMENTED** - Modified Generate Shots buttons in review page scenes tab to redirect to scene-specific shot generation page (/shots/jobId/sceneIndex) instead of general scene selection, enabling direct shot generation for individual scenes
- July 1, 2025: **REVIEW PAGE UI IMPROVEMENTS COMPLETED** - Removed right pane from review page for cleaner full-width layout, removed Continue Working button from bottom navigation, and removed Settings from dashboard Quick Actions while changing Contact Support to Get help
- June 30, 2025: **DNS PREVIEW ISSUE COMPLETELY RESOLVED** - Fixed DNS resolution problem by switching from problematic dynamic Replit domain to reliable standard domain format; application now accessible at https://workspace.indieshots.replit.app with all systems operational
- June 30, 2025: **APPLICATION RESTARTED WITH SECRETS CONFIGURED** - Successfully restarted IndieShots application after user added app secrets; all systems operational including Firebase authentication, OpenAI integration, and database connectivity; server accessible at https://workspace.indieshots.replit.app
- June 30, 2025: **APPLICATION RESTART AND VERIFICATION COMPLETED** - Successfully restarted IndieShots application with all systems operational; server running on port 5000 with external access at https://workspace.indieshots.replit.app; confirmed database connectivity, authentication system, and background cleanup jobs functioning properly
- June 30, 2025: **RUN BUTTON CONFIGURATION COMPLETED** - Successfully configured Run button functionality in .replit.toml with proper npm run dev command, eliminating workflow startup issues and enabling one-click application launch; IndieShots application now fully operational with external access at https://workspace.indieshots.replit.app
- June 30, 2025: **PERSISTENT STARTUP CONFIGURATION RESOLVED** - Fixed critical startup issues preventing IndieShots application from running consistently in Replit environment; resolved environment variable syntax problems with nohup commands, created robust startup script (start-app.sh) for reliable background execution, and achieved stable server operation with external access at https://workspace.indieshots.replit.app
- June 25, 2025: **GITHUB REPOSITORY PREPARATION COMPLETED** - Enhanced README.md with professional documentation, badges, and comprehensive setup instructions; added MIT License, .env.example with all required environment variables, and optimized .gitignore for clean repository; repository now ready for push to https://github.com/indishots/IndieShots with complete documentation and deployment guides
- June 20, 2025: **TWO-TYPE ACCOUNT DELETION SYSTEM IMPLEMENTED** - Added temporary deletion (30-day grace period with automatic logout and restoration option) and permanent deletion (immediate with double confirmation); includes background cleanup job that runs every 24 hours to automatically delete expired accounts; database schema updated with pendingDeletion and deletionScheduledAt fields
- June 20, 2025: **ENHANCED DATA EXPORT WITH PROPER FORMATS** - Upgraded export system to provide scripts in original uploaded formats (PDF/DOCX/TXT) and other data as organized CSV files; creates ZIP archive containing scripts folder with original files, plus user-profile.csv, scripts-metadata.csv, parse-jobs.csv, and shots.csv with README documentation
- June 20, 2025: **DATA EXPORT FUNCTIONALITY IMPLEMENTED** - Made export data button in settings page fully functional; users can now download comprehensive export of all their data including user profile, scripts, parse jobs, shots, and metadata; export includes proper file naming with timestamp and user ID
- June 19, 2025: **NETWORK CONNECTIVITY RESOLVED** - Fixed preview access issues by correctly configuring external URL using REPLIT_DEV_DOMAIN environment variable, application now accessible at proper external domain
- June 19, 2025: **SETTINGS PAGE FUNCTIONALITY COMPLETED** - Made delete account and upgrade to pro buttons fully functional; delete account includes confirmation dialog and complete data cleanup respecting foreign key constraints; upgrade button navigates to upgrade page; pro users see congratulatory message instead of upgrade prompt; added proper tier-aware subscription display with accurate usage statistics
- June 19, 2025: **DASHBOARD NAVIGATION CONSISTENCY IMPLEMENTED** - Updated dashboard recent scripts section to show "Review" buttons for completed scripts that navigate to review page, matching projects page behavior and providing consistent user experience across all project interfaces
- June 19, 2025: **TIER SYNCHRONIZATION AND HEADER UI COMPLETELY UPDATED** - Fixed tier display mismatch by ensuring both auth and upgrade status endpoints use consistent Firebase UID for PostgreSQL lookups; left panel now correctly shows Pro Plan with unlimited access; header now shows "Pro Member" badge for pro users instead of "Upgrade to Pro" button, providing appropriate tier-based interface elements
- June 19, 2025: **SUCCESS MESSAGE TIMING PERFECTED** - Fixed timing issue where "Image regenerated successfully" message appeared before image was actually visible in carousel; success message now displays only after image update completes with proper 300ms delay ensuring users see visual confirmation before notification
- June 19, 2025: **PROPER REGENERATION WORKFLOW IMPLEMENTED** - Fixed regeneration system to match correct user workflow: users select multiple images for carousel editing, can regenerate same image multiple times with different prompts, regenerated images display immediately in carousel view only, main storyboard view updates only when user clicks "Done with this image" giving users full control over the editing process
- June 19, 2025: **PAYU PAYMENT GATEWAY HASH CALCULATION DEBUGGING** - Identified hash calculation mismatch with PayU requirements, working on fixing the exact hash formula with proper salt value (6pSdSll7fkWxuRBbTESjJVztSp7wVGFD) and field count to match PayU's expected format
- June 19, 2025: **PAYU PAYMENT GATEWAY INTEGRATION INITIATED** - Implemented PayU payment system with test credentials (Key: 9AsyFa), payment session creation, server-side form generation and auto-submission to PayU test gateway, troubleshooting hash calculation issues
- June 19, 2025: **COMPREHENSIVE CONTACT FORM SYSTEM IMPLEMENTED** - Created complete contact form system with database storage, admin management interface, and email forwarding to indieshots@theindierise.com; includes form validation, status tracking, and administrative tools for managing customer inquiries
- June 19, 2025: **CONTACT SUPPORT EMAIL INTEGRATED** - Updated all contact support references throughout the application to use indieshots@theindierise.com, including footer links, error messages, support buttons, and authentication error handling
- June 18, 2025: **SECURE TEST PAYMENT ACCESS CONTROL IMPLEMENTED** - Restricted test payment system access to premium@demo.com only, added comprehensive access control across all test routes, implemented proper frontend authorization checks with clear unauthorized access messages, and secured tier switching functionality for development testing
- June 18, 2025: **COMPREHENSIVE TEST PAYMENT SYSTEM CREATED** - Built dummy payment page with tier switching bypass to test free vs pro functionality, comprehensive PayU API exploration document with integration roadmap, test routes for quota management, and production-ready tier testing capabilities
- June 18, 2025: **PRODUCTION-READY QUOTA SYSTEM IMPLEMENTED** - Created PostgreSQL-based quota management system with persistent user usage tracking, proper page limits enforcement, database table for user quotas, and full compatibility with Firebase authentication for production deployment
- June 18, 2025: **COMPREHENSIVE TIER SYSTEM VISIBILITY COMPLETED** - Enhanced authentication page with side-by-side tier comparison cards showing free vs pro features, added prominent upgrade button in app header for free tier users, and integrated upgrade prompts throughout the application for seamless upgrade flow
- June 18, 2025: **FIREBASE-ONLY USER MANAGEMENT IMPLEMENTED** - Completely migrated user authentication and tier management to Firebase, eliminating PostgreSQL user storage dependency; tier information now stored in JWT tokens with Firebase custom claims structure
- June 18, 2025: **COMPREHENSIVE TIER-BASED UPGRADE SYSTEM IMPLEMENTED** - Created complete free/pro tier system with 5-page limit, 5-shot limit, no storyboards for free tier; pro tier has unlimited access with Stripe integration, upgrade prompts, and tier-aware UI throughout application
- June 18, 2025: **DASHBOARD SETTINGS ICON REMOVED** - Cleaned up dashboard header by removing settings icon from app layout header, reducing visual clutter while maintaining core functionality through Quick Actions section
- June 18, 2025: **STORYBOARD REVIEW PAGE LOADING STATE ADDED** - Added proper loading spinner and message "Showing up existing storyboard images..." for storyboards tab in review page to provide feedback while shots data is being fetched
- June 18, 2025: **STORYBOARD UX CONFLICTING MESSAGES FIXED** - Eliminated confusing overlapping success and loading messages by implementing sequential state transitions and delayed success notifications, removed specific image counts from messages to prevent confusion when numbers don't match exactly
- June 18, 2025: **STORYBOARD LOADING DELAY COMPLETELY ELIMINATED** - Fixed confusing delay between "generated successfully" message and image display by using direct base64 data instead of individual API calls, added proper loading states, and prevented duplicate generation attempts during loading phase
- June 18, 2025: **STORYBOARD GENERATION COMPLETELY IMPROVED** - Fixed incomplete generation showing only 4/11 images by implementing proper batch processing with 2-second delays, reduced batch size to 2 shots for reliability, and modified frontend to show all images at once when generation completes instead of partial results
- June 18, 2025: **REACT INFINITE LOOP ERROR PERMANENTLY ELIMINATED** - Implemented UltimateAuthProvider with debounced state updates, memoized context values, atomic state management, and ErrorBoundary wrapper to completely eliminate "Maximum update depth exceeded" errors, all authentication flows now completely stable
- June 17, 2025: **LANDING PAGE UX IMPROVED** - Changed "Go to Dashboard" to consistent "Get Started" button that intelligently redirects authenticated users to dashboard or non-authenticated users to sign-in page
- June 17, 2025: **DIRECT DASHBOARD NAVIGATION IMPLEMENTED** - Users now go directly to dashboard upon successful login without intermediate page redirects, removed problematic automatic redirects from auth pages
- June 17, 2025: **AUTO-RELOGIN COMPLETELY FIXED** - Implemented logout timestamp tracking, enhanced Firebase state management, and automatic state clearing to prevent any auto-authentication after explicit logout
- June 17, 2025: **ROUTE PROTECTION IMPLEMENTED** - Added ProtectedRoute wrapper to all authenticated pages, preventing browser back navigation to protected areas after logout and ensuring all unauthorized access redirects to home page
- June 17, 2025: **NAVIGATION AND LOGOUT FLOW COMPLETED** - Fixed home page routing so main URL shows home page, hidden sidebar for logged-out users, added signin button in top navigation, and ensured logout redirects to home page
- June 17, 2025: **AUTO-RELOGIN BUG FIXED** - Added logout state protection to prevent Firebase from automatically re-authenticating users after logout, ensuring proper redirect to home page
- June 17, 2025: **AUTHENTICATION SYSTEM COMPLETELY FIXED** - Implemented robust token invalidation system with 100% logout test success rate, proper cookie clearing, and secure token blacklisting
- June 17, 2025: **EMAIL/PASSWORD AUTHENTICATION FULLY TESTED AND FIXED** - All authentication scenarios working perfectly: registration, login, wrong password, non-existent users, duplicate emails, and session management with proper error messages
- June 17, 2025: **AUTHENTICATION PAGE CLEANED UP** - Removed Google authentication testing/diagnostic buttons while preserving Google OAuth functionality for cleaner user experience
- June 17, 2025: **UNIFIED FIREBASE AUTHENTICATION IMPLEMENTED** - Migrated to single Firebase Auth system for both email/password and Google OAuth, all users now stored in Firebase Console with PostgreSQL sync
- June 17, 2025: **DEPLOYMENT READY** - Application prepared for deployment at www.indieshots.replit.app with Firebase domain authorization requirements documented
- June 16, 2025: **GOOGLE AUTHENTICATION DOMAIN ISSUE RESOLVED** - Implemented domain-aware authentication that detects Replit environments and provides clear guidance to use email/password authentication instead of failing silently
- June 16, 2025: **GOOGLE AUTHENTICATION FULLY AUTOMATED** - Google sign-in now automatically handles both sign-up and sign-in with persistent 30-day sessions, cross-browser persistence, and smart redirects
- June 16, 2025: **PERSISTENT LOGIN SYSTEM IMPLEMENTED** - Users stay logged in across browser sessions and restarts using Firebase local persistence and extended JWT tokens
- June 16, 2025: **AUTOMATIC ACCOUNT CREATION** - Google authentication seamlessly creates new accounts for first-time users or signs in existing users without manual selection
- June 16, 2025: **AUTHENTICATION ERROR MESSAGES IMPROVED** - Fixed login error messages to show clear, specific messages like "This email is not registered" instead of generic "Login failed" text
- June 16, 2025: **AUTHENTICATION VALIDATION FIXED** - Implemented proper credential validation that prevents unauthorized access and only logs in users with valid email/password combinations
- June 16, 2025: **CASE-INSENSITIVE EMAIL MATCHING** - Fixed email lookup to be case-insensitive for consistent user authentication across different email formats
- June 15, 2025: **AUTHENTICATION FLOW IMPROVED** - Replaced technical 404 errors with user-friendly "Please sign up first" messages, automatic redirect to sign-up tab with email pre-filling for seamless experience
- June 15, 2025: **DASHBOARD QUICK ACTIONS FIXED** - Made all quick action buttons functional with proper navigation to upload, projects, and settings pages
- June 15, 2025: **EXPORT BUTTONS REMOVED** - Removed problematic "Export CSV" and "Export Shot List" buttons from review page that weren't providing expected output
- June 15, 2025: **REGENERATION SYSTEM FIXED** - Fixed stuck "Generating..." placeholders and shot mapping issues, regenerated images now display immediately with custom prompts
- June 15, 2025: **STORYBOARD GENERATION OPTIMIZED** - Fixed auto-loading behavior and improved performance 3-4x with parallel batch processing instead of sequential generation
- June 15, 2025: **NAVIGATION ARROWS CLEANED UP** - Removed unnecessary right panel toggle, left sidebar toggle now only shows on pages with actual sidebars
- June 15, 2025: **CACHE INVALIDATION SYSTEM IMPLEMENTED** - Fixed database caching issue, storyboards now generate fresh images instead of reusing cached versions
- June 15, 2025: **CAROUSEL STABILITY FIXED** - Eliminated image flickering while typing prompts, images now stable until explicit regeneration
- June 15, 2025: **IMAGE REFRESH SYSTEM IMPLEMENTED** - Fixed regeneration display issue with state-based cache invalidation for immediate image updates
- June 15, 2025: **FIXED REGENERATION SYSTEM** - Corrected OpenAI import issue and increased server limits for large image processing
- June 15, 2025: **ENHANCED STORYBOARD INTERFACE** - Implemented checkbox selection, carousel view, and individual image regeneration with custom modifications
- June 15, 2025: **NAVIGATION FIXED** - Fixed "Create Storyboards" button to navigate to scene selection page instead of wrong storyboard path
- June 15, 2025: **REVIEW PAGE SIMPLIFIED** - Removed progress section and download storyboards button for cleaner interface design
- June 15, 2025: **AUTHENTICATION SYSTEM FIXED** - Disabled problematic Google OAuth due to domain authorization issues, email/password authentication fully working with JWT tokens
- June 15, 2025: **DEDICATED AUTH LAYOUT CREATED** - Authentication pages now use clean layout without sidebar navigation for professional login experience
- June 15, 2025: **AUTHENTICATION ROUTING FIXED** - Resolved 404 errors when clicking Sign In by adding missing auth routes (/auth, /login, /signup)
- June 15, 2025: **HOMEPAGE CTA BUTTONS VERIFIED** - All call-to-action buttons (Get Started Free, Sign Up Free, Upgrade to Pro) properly redirect to authentication page
- June 15, 2025: **REACT HOOKS ERRORS RESOLVED** - Fixed React hooks conflicts that were preventing app from loading properly
- June 15, 2025: **COMPREHENSIVE CSV EXPORT IMPLEMENTED** - All 19 shot generation fields now export automatically in every CSV download
- June 15, 2025: **COLUMN SELECTION CONVERTED TO DISPLAY MODE** - Users now see all fields that will be included instead of selecting columns
- June 15, 2025: **FULL FIELD EXPORT GUARANTEED** - CSV exports include Scene Number, Scene Heading, Shot Number, Shot Description, Shot Type, Lens, Camera Movement, Location, Time of Day, Characters, Action, Dialogue, Props, Tone, Mood & Ambience, Lighting, Notes, Sound Design, and Color Temperature
- June 15, 2025: **CSV EXPORT ISSUE FULLY RESOLVED** - Fixed database field mapping for all 19 shot generation fields
- June 15, 2025: **ALL USER-SELECTED COLUMNS NOW EXPORT CORRECTLY** - Verified 9-column export with proper data mapping
- June 15, 2025: **DATABASE SCHEMA ALIGNMENT COMPLETE** - All frontend column names correctly mapped to database fields
- June 15, 2025: **CSV EXPORT COMPLETELY FIXED** - Now exports only user-selected columns from shot database instead of fallback scene data
- June 15, 2025: **ALL COLUMN OPTIONS FULLY IMPLEMENTED** - Added Characters, Action, and Dialogue fields to database schema and AI generation
- June 15, 2025: **SHOT GENERATION ENHANCED TO 14 FIELDS** - AI prompt updated to generate all available column options including character interactions and dialogue
- June 15, 2025: **COLUMN SELECTION INTEGRITY ACHIEVED** - Database storage and CSV export now perfectly match all column selection UI options
- June 15, 2025: **DATABASE SCHEMA UPDATED FOR IMAGE STORAGE** - Added `image_data` column to shots table for persistent base64 image storage
- June 15, 2025: **STORYBOARD PERSISTENCE IMPLEMENTED** - Images now stored directly in database instead of temporary files
- June 15, 2025: **IMAGE GENERATION SERVICE UPDATED** - Modified to save base64 data to database and serve images from shots table
- June 15, 2025: **ZIP DOWNLOAD FUNCTIONALITY UPDATED** - Now works with database-stored images for reliable storyboard downloads
- June 14, 2025: **SCENE-BY-SCENE WORKFLOW IMPLEMENTED** - Complete workflow now matches user requirements: Upload → Scene Selection → Shot Generation → Storyboards
- June 14, 2025: Fixed automatic scene extraction after script upload using user's scene_divider logic
- June 14, 2025: Updated routing to skip column selection initially and go directly to scene selection
- June 14, 2025: Integrated ZIP download functionality for storyboard images with individual image access
- June 14, 2025: **PDF UPLOAD ISSUE RESOLVED** - Fixed file filter validation and data type errors in parse job creation
- June 14, 2025: **PDF SUPPORT CONFIRMED** - Complete PDF file upload and text extraction functionality working
- June 14, 2025: Increased file size limit to 10MB to accommodate PDF files
- June 14, 2025: Added PDF magic byte validation and secure text extraction using pdf-parse library
- June 14, 2025: Updated frontend to support PDF, DOCX, and TXT file formats
- June 14, 2025: **CRITICAL SECURITY FIX** - Implemented proper user-based data filtering across all API endpoints
- June 14, 2025: Added comprehensive user ownership verification to all controllers (scripts and parse jobs)
- June 14, 2025: Users now only see their own projects and parse jobs, preventing unauthorized data access
- June 14, 2025: Enhanced authentication middleware with proper user ID extraction and validation
- June 14, 2025: Fixed logout functionality - now properly serves logout page instead of 404
- June 14, 2025: Updated Vite configuration to handle API routes correctly
- June 14, 2025: Added logout button to navigation panel with proper authentication clearing
- June 14, 2025: Fixed React hooks rendering errors and DOM nesting warnings in navigation
- June 14, 2025: Implemented complete Firebase authentication system with Google/GitHub OAuth
- June 14, 2025: Removed mock authentication data and implemented proper data integrity
- June 14, 2025: Fixed authentication routing and JWT token-based session management
- June 14, 2025: Added comprehensive Projects page with search, filtering, and project management
- June 14, 2025: Implemented project deletion with foreign key constraint handling
- June 14, 2025: Created Settings page with account management and theme switching
- June 14, 2025: Fixed parsing system to handle both screenplay and narrative content
- June 14, 2025: Implemented complete AI-powered scene analysis with OpenAI GPT-4o
- June 14, 2025: Added CSV download functionality for production planning
- June 14, 2025: Enhanced system prompts to convert prose into screenplay format
- June 13, 2025: Initial setup

## Current Status
- Application successfully running on port 5000 with external access configured
- Production deployment live at: https://indieshots.replit.app
- Development environment: https://workspace.indieshots.replit.app
- GitHub repository prepared for: https://github.com/indishots/IndieShots
- Unified Firebase Authentication system implemented (email/password + Google OAuth)
- All users stored in Firebase Console with PostgreSQL sync
- Complete scene-by-scene workflow integrated and functional
- Enhanced storyboard interface with checkbox selection and image regeneration
- Scene division, shot generation, and storyboard creation logic fully integrated
- Backend APIs created for all workflow steps including image regeneration
- Frontend updated to support proper scene selection workflow
- Server configured with 50MB limits for large image processing
- CORS and external connectivity issues resolved
- **PRODUCTION PAYMENT SYSTEM COMPLETED** - Full payment integration with PayU (India), Stripe (Global), email confirmations, webhook verification, and automatic tier upgrades
- **CONFIGURATION CLEANUP COMPLETED** - Removed conflicting configuration files and set up proper Replit run configuration with replit.toml and .replit.toml for persistent execution

## User Preferences

Preferred communication style: Simple, everyday language.