<!DOCTYPE html>
<html>
<head>
    <title>PayU Salt Variation Testing</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1000px; margin: 50px auto; padding: 20px; background: #f8f9fa; }
        .salt-test { background: white; padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #007bff; }
        .error { background: #f8d7da; color: #721c24; border-left-color: #dc3545; }
        .success { background: #d4edda; color: #155724; border-left-color: #28a745; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        .hash-output { font-family: monospace; font-size: 12px; background: #f8f9fa; padding: 10px; border-radius: 5px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>PayU Salt Variation Testing</h1>
    <p>Testing different salt values to find the correct one for your merchant account.</p>
    
    <div class="salt-test">
        <h3>Current Salt (33 chars):</h3>
        <strong>ezsXEEqchsA1ZLmHzn5BrLRl9snmckHn</strong>
        <button onclick="testSalt('ezsXEEqchsA1ZLmHzn5BrLRl9snmckHn', 'current')">Test Current Salt</button>
        <div id="result-current"></div>
    </div>
    
    <div class="salt-test">
        <h3>Alternative Salt 1 (32 chars):</h3>
        <strong>6pSdSll7fkWxuRBbTESjJVztSp7wVGFD</strong>
        <button onclick="testSalt('6pSdSll7fkWxuRBbTESjJVztSp7wVGFD', 'alt1')">Test Alt Salt 1</button>
        <div id="result-alt1"></div>
    </div>
    
    <div class="salt-test">
        <h3>Alternative Salt 2 (32 chars):</h3>
        <strong>gKpu7IKlZgpJBlFW1kPDApMjLAKXOaL2</strong>
        <button onclick="testSalt('gKpu7IKlZgpJBlFW1kPDApMjLAKXOaL2', 'alt2')">Test Alt Salt 2</button>
        <div id="result-alt2"></div>
    </div>
    
    <div class="salt-test">
        <h3>Custom Salt Test:</h3>
        <input type="text" id="custom-salt" placeholder="Enter salt from PayU dashboard" style="width: 400px; padding: 8px;">
        <button onclick="testCustomSalt()">Test Custom Salt</button>
        <div id="result-custom"></div>
    </div>

    <script>
        async function testSalt(salt, resultId) {
            const resultDiv = document.getElementById(`result-${resultId}`);
            resultDiv.innerHTML = '<p>Testing salt...</p>';
            
            try {
                // Calculate hash with this salt
                const testData = {
                    key: 'xXZDKp',
                    txnid: 'TEST_' + Date.now(),
                    amount: '1.00',
                    productinfo: 'Test_Product',
                    firstname: 'Test',
                    email: 'test@example.com'
                };
                
                // Manual hash calculation for testing
                const hashString = `${testData.key}|${testData.txnid}|${testData.amount}|${testData.productinfo}|${testData.firstname}|${testData.email}|||||||||||${salt}`;
                
                // We can't calculate SHA512 in browser easily, so let's just show the format
                resultDiv.innerHTML = `
                    <div class="hash-output">
                        <strong>Hash String:</strong><br>
                        ${hashString}<br><br>
                        <strong>Salt Length:</strong> ${salt.length} characters<br>
                        <strong>Expected:</strong> 32 characters for PayU production<br>
                        <strong>Status:</strong> ${salt.length === 32 ? '✅ Correct length' : '❌ Incorrect length'}
                    </div>
                    <button onclick="createPaymentWithSalt('${salt}')" style="background: #28a745;">Create Payment with This Salt</button>
                `;
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">Error testing salt: ${error.message}</div>`;
            }
        }
        
        async function testCustomSalt() {
            const salt = document.getElementById('custom-salt').value.trim();
            if (!salt) {
                alert('Please enter a salt value');
                return;
            }
            await testSalt(salt, 'custom');
        }
        
        async function createPaymentWithSalt(salt) {
            try {
                // This would need a backend endpoint to test different salts
                alert(`Testing payment with salt: ${salt.substring(0, 8)}... (length: ${salt.length})`);
                
                // In a real scenario, you would send this salt to your backend to test the payment
                console.log('Testing salt:', salt);
                
            } catch (error) {
                console.error('Error testing payment with salt:', error);
            }
        }
        
        // Auto-test current salt on load
        window.onload = function() {
            testSalt('ezsXEEqchsA1ZLmHzn5BrLRl9snmckHn', 'current');
        };
    </script>
</body>
</html>